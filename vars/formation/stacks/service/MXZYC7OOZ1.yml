---

app_settings:
    artifact_key: {{ env }}-MXZYC7OOZ1
    stackName: MXZYC7OOZ1
    blueGreen: true
    app_name: MXZYC7OOZ1
    type: ecs
    target_priority: 10
    weight: 2

stackTags:
    product: {{ product }}
    application: {{ app_name }}
    billing: global
    ansibleStackFormat: '2.0.0'
    stackColor: {{ stack_color }}

uniqueSuffix: ""

stack_color: {{ stackColor }}

parameter_store_permissions:
  - {{ env }}.{{ product }}.MXZYC7OOZ1.*
  - {{ env }}.ess.MXZYC7OOZ1.*
  - {{ env }}.ws.MXZYC7OOZ1.*
  - shared.newrelic.lampogroup.license_key

target_group:
    health_check_path: /some-new-service/ready
    healthy_threshold_count: 2
    unhealthy_threshold_count: 2

listener_rule:
    field: path-pattern
    values:
        - '/some-new-service/*'
    priority: {{ app_settings["target_priority"]|int }}

task_definition:
    cpu: 128
    memory_reservation: 512

container_service:
    desired_count: '2'
    scaling:
        min_count: '2'
        max_count: '4'
    maximum_percent: 200
    minimum_healthy_percent: 100

MXZYC7OOZ1_formation: {{ ecs_service_and_task_definition_standard_formation }}